"use strict";(()=>{function Z(n){for(var e={top:0,left:0};n;)e.top+=n.offsetTop||0,e.left+=n.offsetLeft||0,n=n.offsetParent;return e}function j(){var n=document.getElementsByClassName("plg-note"),e=Z(n[0]);e.width=n[0].offsetWidth,e.height=n[0].offsetHeight,n[0].style.visibility="visible";var i={};i.width=window.innerWidth,i.height=window.innerHeight,i.centerX=e.width/2,i.centerY=e.height/2,i.offsetX=i.width/2,i.offsetY=i.height/2;var{Engine:d}=Matter,{Render:c}=Matter,{Runner:v}=Matter,{Common:oe}=Matter,{World:g}=Matter,{Bodies:m}=Matter,{Body:ne}=Matter,{Events:p}=Matter,{Query:M}=Matter,{MouseConstraint:T}=Matter,{Mouse:q}=Matter,l=d.create(),{world:F}=l,y=c.create({engine:l,element:document.getElementById("debug"),options:{width:e.width,height:e.height,background:"transparent",wireframeBackground:"transparent",hasBounds:!0,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!0,showBroadphase:!0,showBounds:!0,showVelocity:!0,showCollisions:!0,showAxes:!1,showPositions:!0,showAngleIndicator:!0,showIds:!0,showShadows:!1}});c.run(y);var V=v.create();v.run(V,l);var z,P,Q,_,re,E={isStatic:!0,restitution:.8,friction:1},D={isStatic:!0,restitution:.8,friction:1};g.add(F,[_=m.rectangle(e.width/2,e.height+50,e.width+200,100,D),z=m.rectangle(e.width/2,-50,e.width+200,100,E),Q=m.rectangle(e.width+50,e.height/2,100,e.height,E),P=m.rectangle(-50,e.height/2,100,e.height,E)]);for(var h=$(".plg-note_item:visible"),s=[],L=[],f=0,G=h.length;f<G;f++){if(h[f].classList.contains("item"))var b=m.circle(e.width/2+Math.floor(Math.random()*e.width/2)-e.width/4,-50,h[f].offsetWidth/1.65,{restitution:.5,friction:0,frictionAir:.001,frictionStatic:0,density:1,chamfer:{radius:24}});else if(h[f].classList.contains("button-item"))var b=m.rectangle(e.width/2+Math.floor(Math.random()*e.width/2)-e.width/4,e.height/2+Math.floor(Math.random()*e.height/2)-e.height/4,150,44,{restitution:.5,friction:0,frictionAir:.001,frictionStatic:0,density:1,chamfer:{radius:24}});h[f].id=b.id,s.push(b)}g.add(l.world,s),l.world.gravity.y=1;var H=q.create(y.canvas),o=T.create(l,{mouse:H,constraint:{stiffness:1,render:{visible:!1},isDraggable:function(t){return!t.isStatic}}});g.add(l.world,o);let x=!1;o.mouse.element.addEventListener("mousewheel",function(){S()}),o.mouse.element.addEventListener("DOMMouseScroll",function(){S()}),o.mouse.element.addEventListener("touchmove",function(){S()});function S(){x=!0,o.mouse.element.removeEventListener("mousewheel",o.mouse.mousewheel),o.mouse.element.removeEventListener("DOMMouseScroll",o.mouse.mousewheel),o.mouse.element.removeEventListener("touchmove",o.mouse.mousewheel)}o.mouse.element.addEventListener("mouseup",function(){N()}),o.mouse.element.addEventListener("touchend",function(){N()});function N(){x&&(x=!1,o.mouse.element.addEventListener("mousewheel",o.mouse.mousewheel),o.mouse.element.addEventListener("DOMMouseScroll",o.mouse.mousewheel),o.mouse.element.addEventListener("touchmove",o.mouse.mousewheel))}y.mouse=H;var B,W,O,X,A,C;p.on(o,"mousemove",function(t){if(B=t.mouse.absolute.x,W=t.mouse.absolute.y,M.point(s,{x:B,y:W}).length){I();var r=M.point(s,{x:B,y:W})[0].id;document.getElementById(r).className+=" hover",document.body.style.cursor="pointer"}else I()});function I(){for(var t=document.getElementsByClassName("hover"),r=0;r<t.length;r++)t[r].classList.remove("hover");document.body.style.cursor="auto"}p.on(o,"mousedown",function(t){O=t.mouse.absolute.x,X=t.mouse.absolute.y}),p.on(o,"mouseup",function(t){if(A=t.mouse.absolute.x,C=t.mouse.absolute.y,O==A&&X==C){var r=M.point(s,{x:A,y:C})[0];if(r){var a=r.id,u=document.getElementById(a);u.classList.contains("button-item")&&u.click()}}I()}),window.requestAnimationFrame(Y);function Y(){for(var t=0,r=L.length;t<r;t++)L[t].force.y+=(Math.round(Math.random())*2-1)*.5,L[t].force.x+=(Math.round(Math.random())*2-1)*.5;for(var t=0,r=h.length;t<r;t++){for(var a=h[t],u=null,w=0,J=s.length;w<J;w++)if(s[w].id==a.id){u=s[w];break}if(u!==null){var ie=n[0].getBoundingClientRect(),K=n[0].offsetTop,U=n[0].offsetLeft,k={x:u.position.x-U,y:u.position.y-K};a.style.transform="translate( "+(k.x-a.offsetWidth/2)+"px, "+(k.y-a.offsetHeight*1.5+a.offsetHeight)+"px )",a.style.transform+="rotate( "+u.angle+"rad )"}}window.requestAnimationFrame(Y)}}j();function ee(n,e,i){var d;return function(){var c=this,v=arguments;clearTimeout(d),d=setTimeout(function(){d=null,i||n.apply(c,v)},e),i&&!d&&n.apply(c,v)}}var te=ee(function(){location.reload()},500),R=window.innerWidth;window.addEventListener("resize",function(){window.innerWidth!=R&&(R=window.innerWidth,te())});})();
