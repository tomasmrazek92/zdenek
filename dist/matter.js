"use strict";(()=>{function U(r){for(var e={top:0,left:0};r;)e.top+=r.offsetTop||0,e.left+=r.offsetLeft||0,r=r.offsetParent;return e}function Z(){var r=document.getElementsByClassName("plg-note"),e=U(r[0]);e.width=r[0].offsetWidth,e.height=r[0].offsetHeight,r[0].style.visibility="visible";var i={};i.width=window.innerWidth,i.height=window.innerHeight,i.centerX=e.width/2,i.centerY=e.height/2,i.offsetX=i.width/2,i.offsetY=i.height/2;var{Engine:d}=Matter,{Render:c}=Matter,{Runner:w}=Matter,{Common:ee}=Matter,{World:g}=Matter,{Bodies:f}=Matter,{Body:te}=Matter,{Events:p}=Matter,{Query:M}=Matter,{MouseConstraint:k}=Matter,{Mouse:R}=Matter,h=d.create(),{world:T}=h,y=c.create({engine:h,element:document.getElementById("debug"),options:{width:e.width,height:e.height,background:"transparent",wireframeBackground:"transparent",hasBounds:!0,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!0,showBroadphase:!0,showBounds:!0,showVelocity:!0,showCollisions:!0,showAxes:!1,showPositions:!0,showAngleIndicator:!0,showIds:!0,showShadows:!1}});c.run(y);var q=w.create();w.run(q,h);var F,V,z,P,re,b={isStatic:!0,restitution:.8,friction:1},Q={isStatic:!0,restitution:.8,friction:1};g.add(T,[P=f.rectangle(e.width/2,e.height+50,e.width+200,100,Q),F=f.rectangle(e.width/2,-50,e.width+200,100,b),z=f.rectangle(e.width+50,e.height/2,100,e.height,b),V=f.rectangle(-50,e.height/2,100,e.height,b)]);for(var l=$(".plg-note_item:visible"),s=[],x=[],m=0,_=l.length;m<_;m++){if(l[m].classList.contains("item"))var L=f.circle(e.width/2+Math.floor(Math.random()*e.width/2)-e.width/4,-50,l[m].offsetWidth/1.65,{restitution:.5,friction:0,frictionAir:.001,frictionStatic:0,density:1,chamfer:{radius:24}});else if(l[m].classList.contains("button-item"))var L=f.rectangle(e.width/2+Math.floor(Math.random()*e.width/2)-e.width/4,e.height/2+Math.floor(Math.random()*e.height/2)-e.height/4,150,44,{restitution:.5,friction:0,frictionAir:.001,frictionStatic:0,density:1,chamfer:{radius:24}});l[m].id=L.id,s.push(L)}g.add(h.world,s),h.world.gravity.y=1;var I=R.create(y.canvas),o=k.create(h,{mouse:I,constraint:{stiffness:1,render:{visible:!1},isDraggable:function(t){return!t.isStatic}}});g.add(h.world,o);let E=!1;o.mouse.element.addEventListener("mousewheel",function(){E=!0,o.mouse.element.removeEventListener("mousewheel",o.mouse.mousewheel),o.mouse.element.removeEventListener("DOMMouseScroll",o.mouse.mousewheel)}),o.mouse.element.addEventListener("mousedown",function(){E&&(E=!1,o.mouse.element.addEventListener("mousewheel",o.mouse.mousewheel),o.mouse.element.addEventListener("DOMMouseScroll",o.mouse.mousewheel))}),y.mouse=I;var B,W,H,N,S,A;p.on(o,"mousemove",function(t){if(B=t.mouse.absolute.x,W=t.mouse.absolute.y,M.point(s,{x:B,y:W}).length){C();var n=M.point(s,{x:B,y:W})[0].id;document.getElementById(n).className+=" hover",document.body.style.cursor="pointer"}else C()});function C(){for(var t=document.getElementsByClassName("hover"),n=0;n<t.length;n++)t[n].classList.remove("hover");document.body.style.cursor="auto"}p.on(o,"mousedown",function(t){H=t.mouse.absolute.x,N=t.mouse.absolute.y}),p.on(o,"mouseup",function(t){if(S=t.mouse.absolute.x,A=t.mouse.absolute.y,H==S&&N==A){var n=M.point(s,{x:S,y:A})[0];if(n){var a=n.id,u=document.getElementById(a);u.classList.contains("button-item")&&u.click()}}C()}),window.requestAnimationFrame(X);function X(){for(var t=0,n=x.length;t<n;t++)x[t].force.y+=(Math.round(Math.random())*2-1)*.5,x[t].force.x+=(Math.round(Math.random())*2-1)*.5;for(var t=0,n=l.length;t<n;t++){for(var a=l[t],u=null,v=0,G=s.length;v<G;v++)if(s[v].id==a.id){u=s[v];break}if(u!==null){var oe=r[0].getBoundingClientRect(),J=r[0].offsetTop,K=r[0].offsetLeft,Y={x:u.position.x-K,y:u.position.y-J};a.style.transform="translate( "+(Y.x-a.offsetWidth/2)+"px, "+(Y.y-a.offsetHeight*1.5+a.offsetHeight)+"px )",a.style.transform+="rotate( "+u.angle+"rad )"}}window.requestAnimationFrame(X)}}Z();function D(r,e,i){var d;return function(){var c=this,w=arguments;clearTimeout(d),d=setTimeout(function(){d=null,i||r.apply(c,w)},e),i&&!d&&r.apply(c,w)}}var j=D(function(){location.reload()},500),O=window.innerWidth;window.addEventListener("resize",function(){window.innerWidth!=O&&(O=window.innerWidth,j())});})();
