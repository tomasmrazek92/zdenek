"use strict";(()=>{var i=document.getElementById("drawingCanvas"),a=i.getContext("2d"),u=!1,h;a.lineWidth=15;a.lineCap="round";var w=document.getElementById("base64Image");function C(e,n=!1){let o=i.getBoundingClientRect(),t=i.width/o.width,s=i.height/o.height,l=(n?e.touches[0].clientX:e.clientX)-o.left,m=(n?e.touches[0].clientY:e.clientY)-o.top;return{offsetX:l*t,offsetY:m*s}}function x(e,n=!1){u=!0,$("#createBtn").removeClass("disabled");let{offsetX:o,offsetY:t}=C(e,n);a.beginPath(),a.moveTo(o,t)}function k(e,n=!1){if(!u)return;let{offsetX:o,offsetY:t}=C(e,n);a.lineTo(o,t),a.stroke()}function E(){u&&(u=!1,h=i.toDataURL(""),w.removeAttribute("maxlength"),w.value=h)}i.addEventListener("mousedown",x);i.addEventListener("mousemove",k);i.addEventListener("mouseup",E);i.addEventListener("touchstart",e=>{e.preventDefault(),x(e,!0)},{passive:!1});i.addEventListener("touchmove",e=>{e.preventDefault(),k(e,!0)},{passive:!1});i.addEventListener("touchend",E);$("#createBtn").on("click",async function(){let n=await(await fetch("https://api.zdenek.design/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:h})})).json();w.value="",$("[name=img-source]").val(n.url),$("#submitBtn").trigger("click"),$(document).ajaxComplete(function(o,t,s){if(s.url.includes("https://webflow.com/api/v1/form/")){let l=t.status===200,m="note-form",L=s.data.includes(m);l&&setTimeout(()=>{window.location.reload()},3e3)}})});$("#closeNote").on("click",function(){a.clearRect(0,0,i.width,i.height)});var c=".plg-modal",p=".plg-modal_content",g=".plg-modal_slider";var r,f=!1,d=!1,y;$(".plg-visuals_visual").on("click",function(){let e=$(this),n=e.find(".name").val(),o=e.find(".slug").val();$(p).empty();let t=gsap.timeline();t.set(c,{opacity:0}),t.to(c,{opacity:1,display:"block"}),$(p).load("/playground-items/"+o+" .plg-modal_slider",function(){f=!0,d&&(r.destroy(!0,!0),d=!1),T(),v(g),$(".plg-modal_head-inner p").text(n);let s=$(c).find(".plg-modal_item-1");gsap.timeline().from(s,{y:"2rem",opacity:0,stagger:{each:.2}}),window.matchMedia("(min-width: 0px) and (max-width: 991px)")&&$(p).find("video").each(function(){$(this)[0].load(),$(this)[0].play()})})});function v(e){let n=window.matchMedia("(min-width: 0px) and (max-width: 991px)"),o=window.matchMedia("(min-width: 992px)");f&&(o.matches?d||(d=!0,r=new Swiper(e,{slidesPerView:"auto",spaceBetween:48,speed:500,observer:!0,mousewheel:{thresholdDelta:35},keyboard:{enabled:!0},longSwipesRatio:.01,on:{slideChange:t=>{b($(".swiper-wrapper"),t.realIndex)},init:t=>{b($(".swiper-wrapper"),t.realIndex)},onRealIndexChange:t=>{t.allowTouchMove=!1,t.unsetGrabCursor()},onTouchEnd:t=>{t.allowTouchMove=!0}}})):n.matches&&d&&(r.destroy(!0,!0),d=!1))}window.addEventListener("load",function(){v(g)});window.addEventListener("resize",function(){v(g)});var b=(e,n)=>{let o=$(e).find("[visual-video]").not(".w-condition-invisible"),s=$(e).find(".swiper-slide").eq(n);console.log(o),o.each(function(){$(this).find("video")[0].pause(),$(this).find("video")[0].currentTime=0});let l=s.find(o).find("video")[0];console.log(l),l&&l.play()};$("#modalClose").on("click",function(){f=!1,T();let e=gsap.timeline(),n=$(c).find(".plg-modal_item-1");e.to(n,{y:"2rem",opacity:0,stagger:{each:.2},duration:.3}),e.to(c,{opacity:0,duration:.3},"<"),e.set(c,{display:"none"},"<"),r&&r.destroy()});document.addEventListener("keydown",function(e){f===!0&&e.keyCode===27&&$("#modalClose").click()});var T=()=>{f?(y=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden")):$("html, body").scrollTop(y).removeClass("overflow-hidden")};})();
