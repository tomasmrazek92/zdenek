"use strict";(()=>{var i=document.getElementById("drawingCanvas"),a=i.getContext("2d"),h=!1,f;a.lineWidth=15;a.lineCap="round";var p=document.getElementById("base64Image");i.addEventListener("mousedown",e=>{h=!0,$("#createBtn").removeClass("disabled");let t=i.getBoundingClientRect(),n=i.width/t.width,o=i.height/t.height,l=e.clientX-t.left,s=e.clientY-t.top;a.beginPath(),a.moveTo(l*n,s*o)});i.addEventListener("mousemove",e=>{if(!h)return;let t=i.getBoundingClientRect(),n=i.width/t.width,o=i.height/t.height,l=e.clientX-t.left,s=e.clientY-t.top;a.lineTo(l*n,s*o),a.stroke()});i.addEventListener("mouseup",()=>{h=!1,f=i.toDataURL(""),p.removeAttribute("maxlength"),p.value=f});$("#createBtn").on("click",async function(){let t=await(await fetch("https://api.zdenek.design/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:f})})).json();p.value="",$("[name=img-source]").val(t.url),$("#submitBtn").trigger("click"),$(document).ajaxComplete(function(n,o,l){if(l.url.includes("https://webflow.com/api/v1/form/")){let s=o.status===200,C="note-form",x=l.data.includes(C);s&&setTimeout(()=>{window.location.reload()},3e3)}})});$("#closeNote").on("click",function(){a.clearRect(0,0,i.width,i.height)});var c=".plg-modal",u=".plg-modal_content",w=".plg-modal_slider";var r,m=!1,d=!1,v;$(".plg-visuals_visual").on("click",function(){let e=$(this),t=e.find(".name").val(),n=e.find(".slug").val();$(u).empty();let o=gsap.timeline();o.set(c,{opacity:0}),o.to(c,{opacity:1,display:"block"}),$(u).load("/playground-items/"+n+" .plg-modal_slider",function(){m=!0,d&&(r.destroy(!0,!0),d=!1),b(),g(w),$(".plg-modal_head-inner p").text(t);let l=$(c).find(".plg-modal_item-1");gsap.timeline().from(l,{y:"2rem",opacity:0,stagger:{each:.2}}),window.matchMedia("(min-width: 0px) and (max-width: 991px)")&&$(u).find("video").each(function(){$(this)[0].load(),$(this)[0].play()})})});function g(e){let t=window.matchMedia("(min-width: 0px) and (max-width: 991px)"),n=window.matchMedia("(min-width: 992px)");m&&(n.matches?d||(d=!0,r=new Swiper(e,{slidesPerView:"auto",spaceBetween:48,speed:500,observer:!0,mousewheel:{thresholdDelta:35},keyboard:{enabled:!0},longSwipesRatio:.01,on:{slideChange:o=>{y($(".swiper-wrapper"),o.realIndex)},init:o=>{y($(".swiper-wrapper"),o.realIndex)},onRealIndexChange:o=>{o.allowTouchMove=!1,o.unsetGrabCursor()},onTouchEnd:o=>{o.allowTouchMove=!0}}})):t.matches&&d&&(r.destroy(!0,!0),d=!1))}window.addEventListener("load",function(){g(w)});window.addEventListener("resize",function(){g(w)});var y=(e,t)=>{let n=$(e).find("[visual-video]").not(".w-condition-invisible"),l=$(e).find(".swiper-slide").eq(t);console.log(n),n.each(function(){$(this).find("video")[0].pause(),$(this).find("video")[0].currentTime=0});let s=l.find(n).find("video")[0];console.log(s),s&&s.play()};$("#modalClose").on("click",function(){m=!1,b();let e=gsap.timeline(),t=$(c).find(".plg-modal_item-1");e.to(t,{y:"2rem",opacity:0,stagger:{each:.2},duration:.3}),e.to(c,{opacity:0,duration:.3},"<"),e.set(c,{display:"none"},"<"),r&&r.destroy()});document.addEventListener("keydown",function(e){m===!0&&e.keyCode===27&&$("#modalClose").click()});var b=()=>{m?(v=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden")):$("html, body").scrollTop(v).removeClass("overflow-hidden")};})();
