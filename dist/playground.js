"use strict";(()=>{var n=document.getElementById("drawingCanvas"),c=n.getContext("2d"),u=!1,f;c.lineWidth=5;var w=document.getElementById("base64Image");n.addEventListener("mousedown",t=>{u=!0;let e=n.getBoundingClientRect(),i=n.width/e.width,o=n.height/e.height,s=t.clientX-e.left,l=t.clientY-e.top;c.beginPath(),c.moveTo(s*i,l*o)});n.addEventListener("mousemove",t=>{if(!u)return;let e=n.getBoundingClientRect(),i=n.width/e.width,o=n.height/e.height,s=t.clientX-e.left,l=t.clientY-e.top;c.lineTo(s*i,l*o),c.stroke()});n.addEventListener("mouseup",()=>{u=!1,f=n.toDataURL(""),w.removeAttribute("maxlength"),w.value=f});$("#createBtn").on("click",async function(){let e=await(await fetch("https://api.zdenek.design/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:f})})).json();e.success?console.log("File uploaded successfully. File URL is:",e.fileURL):console.error("File upload error:",e.message)});var d=".plg-modal",p=".plg-modal_content",h=".plg-modal_slider";var r,m=!1,a=!1,v;$(".plg-visuals_visual").on("click",function(){let t=$(this),e=t.find(".name").val(),i=t.find(".slug").val();$(p).empty();let o=gsap.timeline();o.set(d,{opacity:0}),o.to(d,{opacity:1,display:"block"}),$(p).load("/playground-items/"+i+" .plg-modal_slider",function(){m=!0,a&&(r.destroy(!0,!0),a=!1),b(),g(h),$(".plg-modal_head-inner p").text(e);let s=$(d).find(".plg-modal_item-1");gsap.timeline().from(s,{y:"2rem",opacity:0,stagger:{each:.2}}),window.matchMedia("(min-width: 0px) and (max-width: 991px)")&&$(p).find("video").each(function(){$(this)[0].load(),$(this)[0].play()})})});function g(t){let e=window.matchMedia("(min-width: 0px) and (max-width: 991px)"),i=window.matchMedia("(min-width: 992px)");m&&(i.matches?a||(a=!0,r=new Swiper(t,{slidesPerView:"auto",spaceBetween:48,speed:500,observer:!0,mousewheel:{thresholdDelta:35},keyboard:{enabled:!0},longSwipesRatio:.01,on:{slideChange:o=>{y($(".swiper-wrapper"),o.realIndex)},init:o=>{y($(".swiper-wrapper"),o.realIndex)},onRealIndexChange:o=>{o.allowTouchMove=!1,o.unsetGrabCursor()},onTouchEnd:o=>{o.allowTouchMove=!0}}})):e.matches&&a&&(r.destroy(!0,!0),a=!1))}window.addEventListener("load",function(){g(h)});window.addEventListener("resize",function(){g(h)});var y=(t,e)=>{let i=$(t).find("[visual-video]").not(".w-condition-invisible"),s=$(t).find(".swiper-slide").eq(e);console.log(i),i.each(function(){$(this).find("video")[0].pause(),$(this).find("video")[0].currentTime=0});let l=s.find(i).find("video")[0];console.log(l),l&&l.play()};$("#modalClose").on("click",function(){m=!1,b();let t=gsap.timeline(),e=$(d).find(".plg-modal_item-1");t.to(e,{y:"2rem",opacity:0,stagger:{each:.2},duration:.3}),t.to(d,{opacity:0,duration:.3},"<"),t.set(d,{display:"none"},"<"),r&&r.destroy()});document.addEventListener("keydown",function(t){m===!0&&t.keyCode===27&&$("#modalClose").click()});var b=()=>{m?(v=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden")):$("html, body").scrollTop(v).removeClass("overflow-hidden")};})();
