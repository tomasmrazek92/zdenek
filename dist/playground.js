"use strict";(()=>{var i=document.getElementById("drawingCanvas-dark"),l=i.getContext("2d");l.strokeStyle="black";var b=document.getElementById("drawingCanvas-light"),m=b.getContext("2d");m.strokeStyle="white";var f=!1,T;l.lineWidth=15;l.lineCap="round";m.lineWidth=15;l.lineCap="round";var L=document.getElementById("base64Image-dark"),D=document.getElementById("base64Image-light");function C(e,n=!1){let o=i.getBoundingClientRect(),t=i.width/o.width,a=i.height/o.height,s=(n?e.touches[0].clientX:e.clientX)-o.left,p=(n?e.touches[0].clientY:e.clientY)-o.top;return{offsetX:s*t,offsetY:p*a}}function k(e,n=!1){f=!0,$("#createBtn").removeClass("disabled");let{offsetX:o,offsetY:t}=C(e,n);l.beginPath(),l.moveTo(o,t)}function x(e,n=!1){if(!f)return;let{offsetX:o,offsetY:t}=C(e,n);l.lineTo(o,t),l.stroke(),m.lineTo(o,t),m.stroke()}function I(){if(!f)return;f=!1;let e=i.toDataURL(),n=b.toDataURL();L.value=e,D.value=n}i.addEventListener("mousedown",k);i.addEventListener("mousemove",x);i.addEventListener("mouseup",I);i.addEventListener("touchstart",e=>{e.preventDefault(),k(e,!0)},{passive:!1});i.addEventListener("touchmove",e=>{e.preventDefault(),x(e,!0)},{passive:!1});i.addEventListener("touchend",I);$("#createBtn").on("click",async function(){$(this).addClass("disabled"),$(this).text("Submitting..");let n=await(await fetch("https://api.zdenek.design/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:T})})).json();imageDataInput.value="",$("[name=img-source]").val(n.url),$("#submitBtn").trigger("click"),$(document).ajaxComplete(function(o,t,a){if(a.url.includes("https://webflow.com/api/v1/form/")){let s=t.status===200,p="note-form",S=a.data.includes(p);s&&setTimeout(()=>{window.location.reload()},3e3)}})});$(".plg-note_item.button-item").on("click",function(){$("html,body").addClass("overflow-hidden")});$("[close-note]").on("click",function(){ctx.clearRect(0,0,canvas.width,canvas.height),$("html,body").removeClass("overflow-hidden")});var c=".plg-modal",h=".plg-modal_content",g=".plg-modal_slider";var r,u=!1,d=!1,v;$(".plg-visuals_visual").on("click",function(){let e=$(this),n=e.find(".name").val(),o=e.find(".slug").val();$(h).empty();let t=gsap.timeline();t.set(c,{opacity:0}),t.to(c,{opacity:1,display:"block"}),$(h).load("/playground-items/"+o+" .plg-modal_slider",function(){u=!0,d&&(r.destroy(!0,!0),d=!1),E(),w(g),$(".plg-modal_head-inner p").text(n);let a=$(c).find(".plg-modal_item-1");gsap.timeline().from(a,{y:"2rem",opacity:0,stagger:{each:.2}}),window.matchMedia("(min-width: 0px) and (max-width: 991px)")&&$(h).find("video").each(function(){$(this)[0].load(),$(this)[0].play()})})});function w(e){let n=window.matchMedia("(min-width: 0px) and (max-width: 991px)"),o=window.matchMedia("(min-width: 992px)");u&&(o.matches?d||(d=!0,r=new Swiper(e,{slidesPerView:"auto",spaceBetween:48,speed:500,observer:!0,mousewheel:{thresholdDelta:35},keyboard:{enabled:!0},longSwipesRatio:.01,on:{slideChange:t=>{y($(".swiper-wrapper"),t.realIndex)},init:t=>{y($(".swiper-wrapper"),t.realIndex)},onRealIndexChange:t=>{t.allowTouchMove=!1,t.unsetGrabCursor()},onTouchEnd:t=>{t.allowTouchMove=!0}}})):n.matches&&d&&(r.destroy(!0,!0),d=!1))}window.addEventListener("load",function(){w(g)});window.addEventListener("resize",function(){w(g)});var y=(e,n)=>{let o=$(e).find("[visual-video]").not(".w-condition-invisible"),a=$(e).find(".swiper-slide").eq(n);console.log(o),o.each(function(){$(this).find("video")[0].pause(),$(this).find("video")[0].currentTime=0});let s=a.find(o).find("video")[0];console.log(s),s&&s.play()};$("#modalClose").on("click",function(){u=!1,E();let e=gsap.timeline(),n=$(c).find(".plg-modal_item-1");e.to(n,{y:"2rem",opacity:0,stagger:{each:.2},duration:.3}),e.to(c,{opacity:0,duration:.3},"<"),e.set(c,{display:"none"},"<"),r&&r.destroy()});document.addEventListener("keydown",function(e){u===!0&&e.keyCode===27&&$("#modalClose").click()});var E=()=>{u?(v=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden")):$("html, body").scrollTop(v).removeClass("overflow-hidden")};})();
